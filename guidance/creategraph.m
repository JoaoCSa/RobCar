map = imread('map_blend_new.png');
oc_mat = imread('map_blend_new_binary.jpg');

figure(1)
imshow(map)

%% Manually select points
%x = [];
%y = [];

% [xp,yp] = getpts;
% close 
% 
% x = [x; xp];
% y = [y; yp];

%% Shows selected points
figure(2)
imshow(map)
hold on
for i= 1:length(x)
    plot(x(i),y(i),'w.')
    text(x(i),y(i),num2str(i),'Color','w')
end
hold on 
plot(x(88),y(88),'r*')

%% Computes graph 
figure(3)
imshow(map)

% Node matching to define edges of the graph 
s = [1 2 2 3 3 4 5 6 7 8 9  10 11 12 13 14 15 16 17 18 19 20 21 22 23 11 24 25 26 27 28 29 30 31 32 33 24 25 26 27 28 29 30 31 32 33 34 1  35 36 37 38 39 40 41 42 43 44 45 46 47 46 49 50 48 40 51 52 53 54 55 56 57 58 48 59 60 61 73 62 63 64 65 66 67 68 69 59 60 61 73 72 71 66 67 68 69 70 74 75 76 77 78 79 80 81 82 83 84 84 85 85 86 79 88 89 90 91 92 93 85 95 96 93 95 85 97 98 99  100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 94  116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 87 86 85 138 139 140 141 142 143 144 145 51  146 147 148 149 150 151 152 153 130 154 155 156 157 158 159 160 161 162 163 164 165 166 155 156 157 158 159 160 161 162 163 164 165 166 167 154 139 168   169   170   171   172   173   174   175   176 177 178 177 179 180 181 182 119 183 184 185 150 145 186 187 46  47  49  188 188 48 ];
t = [2 1 3 2 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 3  24 25 26 27 28 29 30 31 32 33 34 11 24 25 26 27 28 29 30 31 32 33 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 74 50 51 52 53 54 55 56 57 58 2  59 60 61 73 62 63 64 65 66 67 68 69 70 48 59 60 61 73 72 71 66 67 68 69 75 76 77 78 79 80 81 82 83 84 85 95 86 95 87 88 89 90 91 92 93 94 95 96 93 94 98 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 94  116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 86 85 85 139 140 141 142 143 144 145 52  146 147 148 149 150 151 152 153 120 154 155 156 157 158 159 160 161 162 163 164 165 166 167 154 155 156 157 158 159 160 161 162 163 164 165 166 130 168 169   170   171   172   173   174   175   176   177 178 144 179 180 148 169 181 183 184 185 138 182 186 187 42  188 188 188 50  48  188];

weights = sqrt((x(s) - x(t)).^2 + (y(s) - y(t)).^2); % Distance between nodes

G = digraph(s,t,weights);

hold on
plot(G,'XData',x,'YData',y,'NodeLabelColor','w','NodeColor','w','EdgeColor','w');

%% Save work
%save('graph_data.mat')

